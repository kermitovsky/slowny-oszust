<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SÅ‚owny Impostor</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css?v=42" />
</head>
<body>
  
  <div id="modalBackdrop"></div>
  
  <div id="votingOverlay" class="cinematic-overlay voting-style">
    <h2 class="cinematic-title">GÅOSOWANIE!</h2>
    <p class="cinematic-subtitle">Wyeliminuj impostora</p>
  </div>

  <div id="starterOverlay" class="cinematic-overlay starter-style">
    <h2 class="cinematic-title">ZACZYNA:</h2>
    <p class="cinematic-subtitle" id="starterOverlayName"></p>
  </div>

  <div id="summaryOverlay" class="cinematic-overlay summary-style">
    <h2 class="cinematic-title" id="summaryOverlayTitle">KONIEC RUNDY</h2>
    <p class="cinematic-subtitle" id="summaryOverlaySubtitle"></p>
  </div>
  
  <div id="countdownDisplay"></div>
  
  <div class="container" id="loginScreen" data-screen>
    <h1 class="fancy-title">SÅ‚owny Impostor</h1>
    <input type="text" id="playerName" placeholder="Podaj swÃ³j nick" />
    <h3>Wybierz awatar</h3>
    <div id="emojiSelection"></div>
    <hr class="section-divider" />
    <button id="createRoom">StwÃ³rz pokÃ³j</button>
    <hr class="section-divider" />
    <input type="text" id="roomCodeInput" placeholder="Kod pokoju" maxlength="4" />
    <button id="joinRoom">DoÅ‚Ä…cz do pokoju</button>
    <p id="statusMessage"></p>
  </div>

  <div class="container" id="gameScreen" data-screen style="display:none;">
    <div id="roomCodeContainer">
      <p>Kod pokoju: <span id="roomCodeDisplay"></span></p>
      <button id="copyRoomCode" title="Kopiuj kod">ğŸ“‹</button>
      <button id="roomSettingsBtn" title="Ustawienia pokoju" style="display: none;">âš™ï¸</button>
    </div>
    <p id="roundCounter"></p>
    <p id="wordDisplay"></p>
    <div id="countsContainer">
      <p id="playerCountDisplay"></p>
      <p id="impostorCountDisplay"></p>
      <p id="hintChanceInfoDisplay"></p> 
    </div>
    
    <p id="lobbyCategories" style="display:none;"></p>
    
    <p id="voteResultDisplay" style="display:none;"></p>
    
    <ul id="playersList"></ul>
    
    <p id="lastRoundSummaryTitle" style="display: none;">Ostatnia runda:</p>
    <p id="lastRoundSummary"></p>
    
    <button id="startGame" style="display:none;">Start gry</button>
    
    <button id="startVoteBtn" style="display:none; margin-top: 0.8rem; background-color: #2ecc71;">Rozpocznij gÅ‚osowanie</button>
    <button id="confirmVoteBtn" style="display:none; margin-top: 0.8rem;">ZagÅ‚osuj</button>
    
    <button id="endRound" style="display:none; margin-top: 0.8rem; background-color: #c0392b;">ZakoÅ„cz rundÄ™ (DEBUG)</button>
    
    <button id="leaveRoom" style="margin-top: 0.8rem;">OpuÅ›Ä‡ pokÃ³j</button>
  </div>

  <button id="rulesBtn" title="Zasady gry">i</button>
  <button id="themeToggle" title="PrzeÅ‚Ä…cz tryb"></button>
  
  <div id="messageBox" class="modal-box" data-modal></div>
  
  <div id="roleMessageBox" class="modal-box role-card-modal" data-modal>
    <div class="role-card-scene">
      <div class="role-card" id="roleCardInner">
        <div class="role-card-face role-card-back">
          <div class="card-question-mark">?</div>
          <div class="card-cycle-icon">â†»</div>
        </div>
        <div class="role-card-face role-card-front" id="roleCardFrontFace">
          <div id="roleContent"></div>
        </div>
      </div>
    </div>
  </div>
  
  <div id="roomSettingsBox" class="modal-box custom-scrollbar" data-modal style="display:none;">
    <button id="closeRoomSettingsBtn" class="close-btn" title="Zamknij">X</button>
    <h2>Ustawienia Pokoju</h2>
    <div class="settings-group">
      <p>Liczba impostorÃ³w</p>
      <div class="impostor-selector">
        <button id="setMinusImpostor">-</button>
        <span id="setImpostorCount">1</span>
        <button id="setPlusImpostor">+</button>
      </div>
    </div>
    
    <div class="settings-group">
      <p>Szansa na podpowiedÅº</p>
      <div class="slider-container">
        <input type="range" min="0" max="4" value="0" step="1" id="setHintChanceSlider" />
        <div class="slider-labels" id="setSliderLabels">
          <span class="slider-label">0%</span>
          <span class="slider-label">25%</span>
          <span class="slider-label">50%</span>
          <span class="slider-label">75%</span>
          <span class="slider-label">100%</span>
        </div>
      </div>
      <div class="checkbox-container" id="setHintCheckboxContainer">
        <input type="checkbox" id="setHintOnStartCheckbox" />
        <label for="setHintOnStartCheckbox">
          <span class="checkbox"></span>
          Gdy zaczyna mÃ³wiÄ‡
        </label>
      </div>
    </div>

    <div class="settings-group">
      <p>Czy impostorzy wiedzÄ… o sobie?</p>
      <div class="team-selector">
        <button id="setTeamKnowsBtn">Tak</button>
        <button id="setTeamNotKnowsBtn">Nie</button>
      </div>
    </div>

    <button id="saveRoomSettingsBtn">Zapisz Zmiany</button>
  </div>
  
  <div id="categorySelectionBox" class="modal-box custom-scrollbar" data-modal style="display:none;">
    <p>Wybierz kategorie:</p>
    <span id="allCategoriesBtn"><span class="checkbox"></span> Wszystkie</span>
    <div class="category-grid">
      <button id="createCustomCategoryBtn" class="category-btn custom-new-btn">+ StwÃ³rz wÅ‚asnÄ…</button>
    </div>
    <button id="confirmCategories">Dalej</button>
  </div>
  
  <div id="impostorSelectionBox" class="modal-box" data-modal style="display:none;">
    <p>Wybierz liczbÄ™ impostorÃ³w</p>
    <p id="loadingMessage" style="display: none;">Åadowanie kategorii...</p>
    <div class="impostor-selector">
      <button id="minusImpostor" title="Zmniejsz">-</button>
      <span id="impostorCount">1</span>
      <button id="plusImpostor" title="ZwiÄ™ksz">+</button>
    </div>
    <button id="confirmImpostors" disabled>Dalej</button> <p id="recommendedPlayers"></p>
  </div>

  <div id="impostorHintBox" class="modal-box" data-modal style="display:none;">
    <p>Szansa podpowiedzi dla impostora</p>
    
    <div class="slider-container">
      <input type="range" min="0" max="4" value="0" step="1" id="hintChanceSlider" />
      <div class="slider-labels">
        <span class="slider-label label-active">0%</span>
        <span class="slider-label">25%</span>
        <span class="slider-label">50%</span>
        <span class="slider-label">75%</span>
        <span class="slider-label">100%</span>
      </div>
    </div>
    
    <div class="checkbox-container">
      <input type="checkbox" id="hintOnStartCheckbox" />
      <label for="hintOnStartCheckbox">
        <span class="checkbox"></span>
        Gdy zaczyna mÃ³wiÄ‡
      </label>
    </div>
    
    <button id="confirmHintSettingsBtn">Dalej</button>
  </div>
  
  <div id="impostorTeamBox" class="modal-box" data-modal style="display:none;">
    <p>Czy impostorzy wiedzÄ… o sobie?</p>
    
    <div class="team-selector">
      <button id="teamKnowsBtn">Tak</button>
      <button id="teamNotKnowsBtn" class="selected">Nie</button>
    </div>
    
    <button id="confirmTeamSettingsBtn">StwÃ³rz pokÃ³j</button>
  </div>
  
  <div id="customCategoryBox" class="modal-box custom-scrollbar" data-modal style="display:none;">
    <button id="closeCustomCategoryBtn" class="close-btn" title="Zamknij">X</button>
    <h2>StwÃ³rz WÅ‚asnÄ… KategoriÄ™</h2>
    
    <input type="text" id="customCategoryNameInput" placeholder="Nazwa kategorii (np. Nasza Paczka)">
    
    <div class="custom-word-adder">
      <input type="text" id="customWordInput" placeholder="Wpisz sÅ‚owo (min. 3)">
      <button id="addCustomWordBtn">Dodaj</button>
    </div>
    
    <ul id="customWordsList">
      </ul>
    
    <button id="saveCustomCategoryBtn" disabled>Zapisz i uÅ¼yj</button>
  </div>

  <div id="rulesBox" class="modal-box custom-scrollbar" data-modal style="display:none;">
    <button id="closeRulesTop" class="close-btn" title="Zamknij">X</button> 
    <h2>Zasady gry SÅ‚owny Impostor</h2>
    <h3>Cel gry</h3>
    <p>Wciel siÄ™ w detektywa sÅ‚Ã³w! Twoim zadaniem jest opisanie tajemniczego sÅ‚owa, nie zdradzajÄ…c go, lub blefowanie jako impostor, ktÃ³ry sÅ‚owa nie zna. Celem jest zidentyfikowanie impostora przed koÅ„cem rundy!</p>
    <h3>Przebieg gry</h3>
    <ul>
      <li><strong>Tworzenie pokoju:</strong> Host tworzy pokÃ³j, wybierajÄ…c kategorie sÅ‚Ã³w i liczbÄ™ impostorÃ³w (1â€“5). Gracze doÅ‚Ä…czajÄ…, wpisujÄ…c kod pokoju.</li>
      <li><strong>Start gry:</strong> Host uruchamia grÄ™, gdy w pokoju jest odpowiednia liczba graczy (min. 3 dla 1 impostora, 4 dla 2, itd., maks. 10).</li>
      <li><strong>Losowanie sÅ‚owa:</strong> Gra losuje jedno sÅ‚owo z wybranych kategorii. Normalni gracze znajÄ… sÅ‚owo, impostorzy muszÄ… blefowaÄ‡.</li>
      <li><strong>Opisywanie:</strong> Gracze po kolei opisujÄ… sÅ‚owo w kreatywny sposÃ³b, unikajÄ…c jego bezpoÅ›redniego uÅ¼ycia. Losowy gracz zaczyna, z mniejszÄ… szansÄ… na impostora.</li>
      <li><strong>ZakoÅ„czenie rundy:</strong> Host moÅ¼e zakoÅ„czyÄ‡ rundÄ™, gdy podejrzewa impostora. OmÃ³wcie, kto byÅ‚ impostorem, i zacznijcie nowÄ… rundÄ™!</li>
    </ul>
    <h3>Role w grze</h3>
    <ul>
      <li><strong>Normalny gracz:</strong> Zna sÅ‚owo i opisuje je, aby pomÃ³c innym graczom, jednoczeÅ›nie obserwujÄ…c, kto moÅ¼e blefowaÄ‡.</li>
      <li><strong>Impostor:</strong> Nie zna sÅ‚owa i musi sprytnie udawaÄ‡, Å¼e je zna, aby nie zostaÄ‡ zdemaskowanym.</li>
      <li><strong>Host:</strong> Tworzy pokÃ³j, wybiera kategorie i liczbÄ™ impostorÃ³w, rozpoczyna i koÅ„czy rundy. MoÅ¼e teÅ¼ wyrzucaÄ‡ graczy z pokoju.</li>
    </ul>
    <h3>Porady</h3>
    <ul>
      <li>BÄ…dÅº kreatywny w opisach, ale uwaÅ¼aj, by nie zdradziÄ‡ sÅ‚owa!</li>
      <li>Obserwuj, czy opisy innych graczy sÄ… spÃ³jne â€“ impostorzy mogÄ… siÄ™ zdradziÄ‡!</li>
      <li>Graj w grupie do 10 osÃ³b dla najlepszej zabawy.</li>
    </ul>
    <button id="closeRules" title="Zamknij" class="close-btn-bottom">X</button> 
  </div>

  <script src="config.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="script.js?v=42"></script> 
</body>
</html>
