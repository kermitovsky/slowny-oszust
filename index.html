<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Sowny Impostor</title>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  
  <link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Poppins:wght@400;600;800&display=swap" rel="stylesheet" />
  
  <link rel="stylesheet" href="style.css?v=30" />
</head>
<body>
  <div id="modalBackdrop"></div>

  <div class="container" id="loginScreen" data-screen>
    <h1 class="fancy-title">Sowny Impostor</h1>
    
    <input type="text" id="playerName" placeholder="Podaj sw贸j nick" />
    
    <h3>Wybierz awatar</h3>
    <div id="emojiSelection"></div>
    
    <hr class="section-divider" />
    
    <button id="createRoom">Stw贸rz pok贸j</button>
    
    <hr class="section-divider" />
    
    <input type="text" id="roomCodeInput" placeholder="Kod pokoju" maxlength="4" />
    <button id="joinRoom">Docz do pokoju</button>
    
    <p id="statusMessage"></p>
  </div>

  <div class="container" id="gameScreen" data-screen style="display:none;">
    <div id="roomCodeContainer">
      <p>Kod pokoju: <span id="roomCodeDisplay"></span></p>
      <button id="copyRoomCode" title="Kopiuj kod"></button>
    </div>
    
    <p id="roundCounter"></p>
    <p id="wordDisplay"></p>

    <div id="countsContainer">
      <p id="playerCountDisplay"></p>
      <p id="impostorCountDisplay"></p>
      <p id="hintChanceInfoDisplay"></p> 
    </div>
    
    <p id="lobbyCategories" style="display:none;"></p>
    
    <p id="voteResultDisplay" style="display:none;"></p>
    
    <ul id="playersList"></ul>
    
    <p id="lastRoundSummaryTitle" style="display: none;">Ostatnia runda:</p>
    <p id="lastRoundSummary"></p>
    
    <button id="startGame" style="display:none;">Start gry</button>
    
    <button id="startVoteBtn" style="display:none; margin-top: 0.8rem; background-color: #2ecc71;">Rozpocznij gosowanie</button>
    <button id="confirmVoteBtn" style="display:none; margin-top: 0.8rem;">Zagosuj</button>
    
    <button id="endRound" style="display:none; margin-top: 0.8rem; background-color: #c0392b;">Zakocz rund (DEBUG)</button>
    
    <button id="leaveRoom" style="margin-top: 0.8rem;">Opu pok贸j</button>
  </div>

  <button id="rulesBtn" title="Zasady gry">i</button>
  <button id="themeToggle" title="Przecz motyw"></button>
  <button id="settingsBtn" title="Ustawienia" style="display:none;">锔</button>

  <div id="rulesModal" class="modal">
    <div class="modal-content">
      <span id="rulesClose" class="close">&times;</span>
      <h2>Zasady Gry</h2>
      <p><strong>Cel:</strong><br/>Niewinni musz znale藕 Impostora.<br/>Impostor musi udawa niewinnego i zgadn sowo.</p>
      <p><strong>Przebieg:</strong><br/>Wszyscy (opr贸cz Impostora) dostaj to samo tajne sowo. Ka偶dy po kolei m贸wi JEDNO sowo-skojarzenie zwizane z tajnym hasem.</p>
      <p>Impostor widzi "Jeste Impostorem" i musi wymyla skojarzenia na podstawie tego, co m贸wi inni, 偶eby si nie zdradzi.</p>
      <p><strong>Gosowanie:</strong><br/>Gdy wszyscy powiedz swoje skojarzenie, nastpuje gosowanie na to, kto jest Impostorem.</p>
    </div>
  </div>
  
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <span id="settingsClose" class="close">&times;</span>
      <h2>Ustawienia Gry</h2>
      
      <label for="impostorCountSelect">Liczba Impostor贸w:</label>
      <select id="impostorCountSelect">
        <option value="1" selected>1</option>
        <option value="2">2</option>
        <option value="3">3</option>
      </select>
      <p class="small-info">Maksymalna liczba impostor贸w to poowa graczy (zaokrglona w d贸).</p>

      <label for="hintChanceRange">Szansa na podpowied藕 dla Impostora (%): <span id="hintChanceValue">10</span>%</label>
      <input type="range" id="hintChanceRange" min="0" max="100" value="10" step="5">
      <p class="small-info">Jeli zadziaa, Impostor zobaczy tylko kategori sowa.</p>
      
      <hr />
      <h3>Kategorie s贸w</h3>
      <div id="categoriesCheckboxes">
        </div>
      
      <button id="saveSettingsBtn" style="margin-top: 1rem;">Zapisz ustawienia</button>
    </div>
  </div>

  <div id="myRoleModal" class="modal role-reveal-modal">
    <div class="modal-content role-reveal-content">
      <span id="closeRoleModal" class="close" style="display:none;">&times;</span>
      <h2 id="roleTitle">Twoja rola to...</h2>
      <div class="curtain-container">
        <div class="curtain" id="curtain">
          <span class="curtain-text">Kliknij, aby odkry</span>
        </div>
        <div class="hidden-role-info" id="hiddenRoleInfo">
          </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <script src="script.js?v=31"></script>
</body>
</html>
